#!/usr/bin/node
'use strict';
let _ = require('lodash');
let os = require('os');
let yargs = require('yargs');

yargs
    .usage('Usage:\n  $0 <command> [options]')
    .command(require('./lib/cli/deploy'))
    .command({
        command: 'server',
        description: 'Run Hapili as a master server, and start the web server for access to the user interface.',
        builder: {
        },
        handler: argv => {
            return require('./lib/hapili-server.js');
        },
    })
    .command({
        command: 'node',
        description: 'Run Hapili as a member node.',
        builder: {
        },
        handler: argv => {
            return require('./lib/hapili-node.js');
        },
    })
    .option('arch', {
        description: 'Override the system os/arch identifier.',
        default: os.arch() + '|' + os.platform(),
    })
    .option('log.level', {
        alias: ['ll'],
        description: 'Set the default logging output level.',
        choices: ['fatal', 'error', 'warn', 'info', 'debug', 'trace'],
        default: 'info',
    })
    .demandCommand(1, 'Which command?')
    .help('help')
    .alias('help', 'h')
    .wrap(yargs.terminalWidth())
    .argv;
